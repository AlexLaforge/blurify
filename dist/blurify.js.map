{"version":3,"file":null,"sources":["../src/utils.js","../src/index.js"],"sourcesContent":["export function preloadImages(images) {\n    let newimages = [],\n        loadedImagesCount = 0,\n        postAction = function () {};\n\n    images = (typeof images != 'object') ? [images] : images;\n\n    function imageLoadPost() {\n        loadedImagesCount++;\n        if (loadedImagesCount == images.length) postAction(newimages);\n    }\n\n    images.map((image, i) => {\n        newimages[i] = new Image();\n        newimages[i].crossOrigin = '*';\n        newimages[i].src = image.src;\n        newimages[i].onload = function () {\n            imageLoadPost();\n        };\n        newimages[i].onerror = function () {\n            imageLoadPost();\n        };\n    });\n\n    return {\n        done(callback) {\n            postAction = callback || postAction;\n        },\n    };\n}\n","import {\n    preloadImages,\n} from './utils';\n\nexport default class blurify {\n    constructor(options) {\n        this.blur = options.blur || 6;\n        this.imageType = options.imageType || `image/jpeg`;\n        this.$els = [...options.images];\n        preloadImages(this.$els).done(images => {\n            images.map((image, index) => {\n                this.$els[index].src = this.getDataURL(image);\n            });\n        });\n    }\n\n    blurify(canvas, blur) {\n        let ctx = canvas.getContext('2d');\n        ctx.globalAlpha = 0.5;\n        for (let y = -blur; y <= blur; y += 2) {\n            for (let x = -blur; x <= blur; x += 2) {\n                ctx.drawImage(canvas, x, y);\n                if (x >= 0 && y >= 0) ctx.drawImage(canvas, -(x - 1), -(y - 1));\n            }\n        }\n        ctx.globalAlpha = 1;\n    }\n\n    getDataURL(image) {\n        let canvas = document.createElement('canvas'),\n            ctx = canvas.getContext('2d');\n\n        canvas.width = image.width;\n        canvas.height = image.height;\n        ctx.drawImage(image, 0, 0);\n        this.blurify(canvas, this.blur);\n        return canvas.toDataURL(this.imageType);\n    }\n}\n"],"names":["preloadImages","images","newimages","loadedImagesCount","postAction","imageLoadPost","length","map","image","i","Image","crossOrigin","src","onload","onerror","done","callback","blurify","options","blur","imageType","$els","index","getDataURL","canvas","ctx","getContext","globalAlpha","y","x","drawImage","document","createElement","width","height","toDataURL"],"mappings":";;;;;;;;;;;IAAO,SAASA,aAAT,CAAuBC,MAAvB,EAA+B;AAClC,IAAA,QAAIC,YAAY,EAAhB;AAAA,IAAA,QACIC,oBAAoB,CADxB;AAAA,IAAA,QAEIC,aAAa,sBAAY,EAF7B;;AAIAH,IAAAA,aAAU,QAAOA,MAAP,yCAAOA,MAAP,MAAiB,QAAlB,GAA8B,CAACA,MAAD,CAA9B,GAAyCA,MAAlD;;AAEA,IAAA,aAASI,aAAT,GAAyB;AACrBF,IAAAA;AACA,IAAA,YAAIA,qBAAqBF,OAAOK,MAAhC,EAAwCF,WAAWF,SAAX;AAC3C,IAAA;;AAEDD,IAAAA,WAAOM,GAAP,CAAW,UAACC,KAAD,EAAQC,CAAR,EAAc;AACrBP,IAAAA,kBAAUO,CAAV,IAAe,IAAIC,KAAJ,EAAf;AACAR,IAAAA,kBAAUO,CAAV,EAAaE,WAAb,GAA2B,GAA3B;AACAT,IAAAA,kBAAUO,CAAV,EAAaG,GAAb,GAAmBJ,MAAMI,GAAzB;AACAV,IAAAA,kBAAUO,CAAV,EAAaI,MAAb,GAAsB,YAAY;AAC9BR,IAAAA;AACH,IAAA,SAFD;AAGAH,IAAAA,kBAAUO,CAAV,EAAaK,OAAb,GAAuB,YAAY;AAC/BT,IAAAA;AACH,IAAA,SAFD;AAGH,IAAA,KAVD;;AAYA,IAAA,WAAO;AACHU,IAAAA,YADG,gBACEC,QADF,EACY;AACXZ,IAAAA,yBAAaY,YAAYZ,UAAzB;AACH,IAAA;AAHE,IAAA,KAAP;AAKH,IAAA;;QCzBoBa;AACjB,IAAA,qBAAYC,OAAZ,EAAqB;AAAA,IAAA;;AAAA,IAAA;;AACjB,IAAA,aAAKC,IAAL,GAAYD,QAAQC,IAAR,IAAgB,CAA5B;AACA,IAAA,aAAKC,SAAL,GAAiBF,QAAQE,SAAR,gBAAjB;AACA,IAAA,aAAKC,IAAL,gCAAgBH,QAAQjB,MAAxB;AACAD,IAAAA,sBAAc,KAAKqB,IAAnB,EAAyBN,IAAzB,CAA8B,kBAAU;AACpCd,IAAAA,mBAAOM,GAAP,CAAW,UAACC,KAAD,EAAQc,KAAR,EAAkB;AACzB,IAAA,sBAAKD,IAAL,CAAUC,KAAV,EAAiBV,GAAjB,GAAuB,MAAKW,UAAL,CAAgBf,KAAhB,CAAvB;AACH,IAAA,aAFD;AAGH,IAAA,SAJD;AAKH,IAAA;;;;oCAEOgB,QAAQL,MAAM;AAClB,IAAA,gBAAIM,MAAMD,OAAOE,UAAP,CAAkB,IAAlB,CAAV;AACAD,IAAAA,gBAAIE,WAAJ,GAAkB,GAAlB;AACA,IAAA,iBAAK,IAAIC,IAAI,CAACT,IAAd,EAAoBS,KAAKT,IAAzB,EAA+BS,KAAK,CAApC,EAAuC;AACnC,IAAA,qBAAK,IAAIC,IAAI,CAACV,IAAd,EAAoBU,KAAKV,IAAzB,EAA+BU,KAAK,CAApC,EAAuC;AACnCJ,IAAAA,wBAAIK,SAAJ,CAAcN,MAAd,EAAsBK,CAAtB,EAAyBD,CAAzB;AACA,IAAA,wBAAIC,KAAK,CAAL,IAAUD,KAAK,CAAnB,EAAsBH,IAAIK,SAAJ,CAAcN,MAAd,EAAsB,EAAEK,IAAI,CAAN,CAAtB,EAAgC,EAAED,IAAI,CAAN,CAAhC;AACzB,IAAA;AACJ,IAAA;AACDH,IAAAA,gBAAIE,WAAJ,GAAkB,CAAlB;AACH,IAAA;;;uCAEUnB,OAAO;AACd,IAAA,gBAAIgB,SAASO,SAASC,aAAT,CAAuB,QAAvB,CAAb;AAAA,IAAA,gBACIP,MAAMD,OAAOE,UAAP,CAAkB,IAAlB,CADV;;AAGAF,IAAAA,mBAAOS,KAAP,GAAezB,MAAMyB,KAArB;AACAT,IAAAA,mBAAOU,MAAP,GAAgB1B,MAAM0B,MAAtB;AACAT,IAAAA,gBAAIK,SAAJ,CAActB,KAAd,EAAqB,CAArB,EAAwB,CAAxB;AACA,IAAA,iBAAKS,OAAL,CAAaO,MAAb,EAAqB,KAAKL,IAA1B;AACA,IAAA,mBAAOK,OAAOW,SAAP,CAAiB,KAAKf,SAAtB,CAAP;AACH,IAAA;;;;;;;;"}